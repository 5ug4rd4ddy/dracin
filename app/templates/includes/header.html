<header class="sticky top-0 z-50 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 px-6 lg:px-12 py-4">
    <div class="max-w-[1600px] mx-auto flex items-center justify-between gap-8">
        <div class="flex items-center gap-3 shrink-0">
            <a href="{{ url_for('main.index') }}" class="flex items-center gap-3 no-underline">
                <div class="w-8 h-8 bg-primary rounded flex items-center justify-center">
                    <span class="material-symbols-outlined text-black text-xl">play_arrow</span>
                </div>
                <span class="text-2xl font-bold tracking-tighter text-primary">{{ site_settings.site_title|upper if site_settings else 'DRACIN' }}</span>
            </a>
        </div>
        <nav class="hidden lg:flex items-center gap-1">
            <a class="px-4 py-2 text-primary font-medium hover:bg-white/5 rounded-lg transition-all" href="{{ url_for('main.index') }}">Home</a>
            {% if current_user.is_authenticated and current_user.role == 'admin' %}
            <a class="px-4 py-2 text-slate-400 hover:text-primary hover:bg-white/5 rounded-lg transition-all" href="{{ url_for('admin.dashboard') }}">Dashboard</a>
            {% endif %}
            <a class="px-4 py-2 text-slate-400 hover:text-primary hover:bg-white/5 rounded-lg transition-all" href="{{ url_for('main.favorites') }}">Favorite</a>
            <a class="px-4 py-2 text-slate-400 hover:text-primary hover:bg-white/5 rounded-lg transition-all" href="{{ url_for('main.history') }}">History</a>
            <a class="px-4 py-2 text-slate-400 hover:text-primary hover:bg-white/5 rounded-lg transition-all" href="{{ url_for('main.profile', _anchor='pricing') }}">Berlangganan</a>
        </nav>
        <div class="relative flex-1 max-w-md hidden md:block">
            <form action="{{ url_for('main.search') }}" method="get">
                <button type="submit" class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-primary transition-colors">
                    <span class="material-symbols-outlined text-xl">search</span>
                </button>
                <input name="q" class="w-full bg-slate-100 dark:bg-surface-dark border-none rounded-full pl-10 pr-4 py-2 text-sm focus:ring-2 focus:ring-primary transition-all text-slate-900 dark:text-slate-200" placeholder="Search movies, series, stars..." type="text" value="{{ request.args.get('q', '') }}"/>
            </form>
        </div>
        <div class="flex items-center gap-6 shrink-0">
            
            {% if current_user.is_authenticated %}
            <div class="flex items-center gap-3 cursor-pointer group">
                <a href="{{ url_for('main.profile') }}" class="flex items-center gap-3">
                    <div class="text-right hidden sm:block">
                        <p class="text-sm font-semibold">{{ current_user.name }}</p>
                        <p class="text-[10px] text-slate-400 uppercase tracking-wider">{{ current_user.role }}</p>
                    </div>
                    <!-- Placeholder for user image if not available -->
                    <div class="w-10 h-10 rounded-full border-2 border-primary/20 group-hover:border-primary transition-all object-cover bg-slate-700 flex items-center justify-center text-white font-bold">
                        {{ current_user.name[:1].upper() }}
                    </div>
                </a>
                {% if not session.get('is_tma') %}
                <a href="{{ url_for('auth.logout') }}" class="ml-2 text-xs text-red-500 hover:underline">Logout</a>
                {% endif %}
            </div>
            {% else %}
            <a href="{{ url_for('auth.login') }}" class="px-4 py-2 bg-primary text-black font-bold rounded-lg hover:bg-yellow-400 transition-colors">Login</a>
            {% endif %}
        </div>
    </div>
</header>
